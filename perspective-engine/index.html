<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Perspective Engine - Aroha's Projects</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple SVG icons as React components
        const ClockIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" strokeWidth="2"/>
                <path d="M12 6v6l4 2" strokeWidth="2" strokeLinecap="round"/>
            </svg>
        );

        const CalendarIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" strokeWidth="2"/>
                <path d="M16 2v4M8 2v4M3 10h18" strokeWidth="2"/>
            </svg>
        );

        const HeartIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" strokeWidth="2"/>
            </svg>
        );

        const TrendingUpIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M23 6l-9.5 9.5-5-5L1 18" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                <path d="M17 6h6v6" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
        );

        const ZapIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
        );

        const PerspectiveEngine = () => {
          const [currentAge, setCurrentAge] = useState(30);
          const [goalAge, setGoalAge] = useState(85);
          const [quoteIndex, setQuoteIndex] = useState(0);

          const quotes = [
            { text: "You could leave life right now. Let that determine what you do and say and think.", author: "Marcus Aurelius" },
            { text: "The trouble is, you think you have time.", author: "Buddha" },
            { text: "Time is the coin of your life. It is the only coin you have, and only you can determine how it will be spent.", author: "Carl Sandburg" },
            { text: "The days are long but the decades are short.", author: "Sam Altman" },
            { text: "We are always getting ready to live but never living.", author: "Ralph Waldo Emerson" },
            { text: "Do not act as if you had ten thousand years to live.", author: "Marcus Aurelius" }
          ];

          useEffect(() => {
            const interval = setInterval(() => {
              setQuoteIndex((prev) => (prev + 1) % quotes.length);
            }, 8000);
            return () => clearInterval(interval);
          }, []);

          const handleCurrentAgeChange = (value) => {
            const age = Number(value);
            setCurrentAge(age);
            if (age >= goalAge) {
              setGoalAge(age + 1);
            }
          };

          const handleGoalAgeChange = (value) => {
            const age = Number(value);
            if (age > currentAge) {
              setGoalAge(age);
            }
          };

          // Calculate perceived time ratio for each year
          const getPerceivedTimeRatio = (age) => {
            // Using logarithmic perception: each year feels like 1/age of total life
            return 1 / age;
          };

          // Calculate dot size based on perceived time
          const getDotSize = (yearAge) => {
            if (yearAge === 0) return 4;
            const ratio = getPerceivedTimeRatio(yearAge);
            // Scale from 1 (smallest, older ages) to 4 (largest, younger ages)
            const size = Math.max(1, Math.min(4, ratio * 20));
            return size;
          };

          const calculateMetrics = () => {
            const totalMonths = goalAge * 12;
            const livedMonths = currentAge * 12;
            const remainingMonths = totalMonths - livedMonths;

            const daysRemaining = Math.floor(remainingMonths * 30.44);
            const weekendsRemaining = Math.floor(remainingMonths * 0.5);
            const healthyYearsThreshold = 75;
            const healthyYearsRemaining = Math.max(0, healthyYearsThreshold - currentAge);
            const percentageLived = ((livedMonths / totalMonths) * 100).toFixed(1);

            // Calculate perceived time remaining
            let totalPerceivedTime = 0;
            let remainingPerceivedTime = 0;
            for (let age = 1; age <= goalAge; age++) {
              const perceived = getPerceivedTimeRatio(age);
              totalPerceivedTime += perceived;
              if (age > currentAge) {
                remainingPerceivedTime += perceived;
              }
            }
            const perceivedPercentageRemaining = ((remainingPerceivedTime / totalPerceivedTime) * 100).toFixed(1);

            return {
              totalMonths,
              livedMonths,
              remainingMonths,
              daysRemaining,
              weekendsRemaining,
              healthyYearsRemaining,
              percentageLived,
              perceivedPercentageRemaining
            };
          };

          const metrics = calculateMetrics();
          const currentQuote = quotes[quoteIndex];

          const getHealthColor = (monthIndex) => {
            const age = monthIndex / 12;

            if (age < 20) return 'bg-blue-400';
            if (age >= 20 && age < 40) return 'bg-green-400';
            if (age >= 40 && age < 60) return 'bg-yellow-400';
            if (age >= 60 && age < 75) return 'bg-orange-400';
            return 'bg-red-400';
          };

          const renderLifeGrid = () => {
            const squares = [];
            const currentMonth = Math.floor(currentAge * 12);

            for (let i = 0; i < metrics.totalMonths; i++) {
              const isPast = i < currentMonth;
              const isCurrent = i === currentMonth;
              const yearAge = Math.floor(i / 12) + 1;
              const dotSize = getDotSize(yearAge);
              const healthColor = getHealthColor(i);

              squares.push(
                <div
                  key={i}
                  className={`transition-all duration-300 rounded-sm ${
                    isCurrent
                      ? 'bg-green-400 shadow-lg shadow-green-400/50 scale-125'
                      : isPast
                      ? 'bg-gray-700/30'
                      : `${healthColor} hover:opacity-80`
                  }`}
                  style={{
                    width: `${dotSize * 2}px`,
                    height: `${dotSize * 2}px`
                  }}
                  title={`Month ${i + 1} - Age ${Math.floor(i / 12)} - Perceived size: ${dotSize.toFixed(1)}`}
                />
              );
            }
            return squares;
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-gray-900 text-gray-100 p-8">
              <div className="max-w-7xl mx-auto space-y-12">
                {/* Header */}
                <header className="text-center space-y-4">
                  <h1 className="text-5xl font-extralight tracking-wider text-gray-100">
                    The Perspective Engine
                  </h1>
                  <p className="text-gray-400 text-lg font-light max-w-2xl mx-auto">
                    A visual meditation on time, mortality, and perceptual acceleration
                  </p>
                  <nav className="pt-4">
                    <a href="/" className="text-green-400 hover:text-green-300 transition-colors">
                      ← Back to Projects
                    </a>
                  </nav>
                </header>

                {/* Input Section with Sliders */}
                <div className="bg-gray-800/30 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50 shadow-2xl">
                  <div className="grid md:grid-cols-2 gap-12 max-w-3xl mx-auto">
                    <div className="space-y-4">
                      <div className="flex justify-between items-center">
                        <label className="block text-sm font-light text-gray-300 tracking-wide">
                          Current Age
                        </label>
                        <span className="text-3xl font-extralight text-green-400">{currentAge}</span>
                      </div>
                      <input
                        type="range"
                        value={currentAge}
                        onChange={(e) => handleCurrentAgeChange(e.target.value)}
                        className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-green-400"
                        min="1"
                        max="119"
                        step="1"
                      />
                      <div className="flex justify-between text-xs text-gray-500">
                        <span>1</span>
                        <span>119</span>
                      </div>
                    </div>
                    <div className="space-y-4">
                      <div className="flex justify-between items-center">
                        <label className="block text-sm font-light text-gray-300 tracking-wide">
                          Goal Age
                        </label>
                        <span className="text-3xl font-extralight text-blue-400">{goalAge}</span>
                      </div>
                      <input
                        type="range"
                        value={goalAge}
                        onChange={(e) => handleGoalAgeChange(e.target.value)}
                        className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-400"
                        min={currentAge + 1}
                        max="120"
                        step="1"
                      />
                      <div className="flex justify-between text-xs text-gray-500">
                        <span>{currentAge + 1}</span>
                        <span>120</span>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Metrics Dashboard */}
                <div className="grid md:grid-cols-5 gap-6">
                  <div className="bg-gray-800/30 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50 space-y-3">
                    <div className="flex items-center gap-3 text-gray-400">
                      <ClockIcon />
                      <span className="text-sm font-light tracking-wide">Days Left</span>
                    </div>
                    <p className="text-4xl font-extralight text-gray-100">
                      {metrics.daysRemaining.toLocaleString()}
                    </p>
                  </div>

                  <div className="bg-gray-800/30 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50 space-y-3">
                    <div className="flex items-center gap-3 text-gray-400">
                      <CalendarIcon />
                      <span className="text-sm font-light tracking-wide">Weekends</span>
                    </div>
                    <p className="text-4xl font-extralight text-gray-100">
                      {metrics.weekendsRemaining.toLocaleString()}
                    </p>
                  </div>

                  <div className="bg-gray-800/30 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50 space-y-3">
                    <div className="flex items-center gap-3 text-gray-400">
                      <HeartIcon />
                      <span className="text-sm font-light tracking-wide">Healthy Years</span>
                    </div>
                    <p className="text-4xl font-extralight text-gray-100">
                      {metrics.healthyYearsRemaining}
                    </p>
                  </div>

                  <div className="bg-gray-800/30 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50 space-y-3">
                    <div className="flex items-center gap-3 text-gray-400">
                      <TrendingUpIcon />
                      <span className="text-sm font-light tracking-wide">Life Lived</span>
                    </div>
                    <p className="text-4xl font-extralight text-gray-100">
                      {metrics.percentageLived}%
                    </p>
                  </div>

                  <div className="bg-gradient-to-br from-purple-900/30 to-purple-800/20 backdrop-blur-sm rounded-2xl p-6 border border-purple-700/50 space-y-3">
                    <div className="flex items-center gap-3 text-purple-300">
                      <ZapIcon />
                      <span className="text-sm font-light tracking-wide">Perceived Time Left</span>
                    </div>
                    <p className="text-4xl font-extralight text-purple-200">
                      {metrics.perceivedPercentageRemaining}%
                    </p>
                  </div>
                </div>

                {/* Perception Explanation */}
                <div className="bg-gradient-to-br from-purple-900/20 to-purple-800/10 backdrop-blur-sm rounded-2xl p-8 border border-purple-700/30">
                  <div className="flex items-start gap-4">
                    <ZapIcon />
                    <div className="space-y-3">
                      <h3 className="text-xl font-light text-purple-200">Perceptual Time Theory</h3>
                      <p className="text-gray-300 font-light leading-relaxed">
                        Notice how the dots grow smaller as you age? This visualizes the <strong>Proportional Theory</strong>:
                        at age 5, one year is 20% of your entire life. At 50, it's just 2%. Your brain encodes less novelty
                        as routines form, and neural processing slows—making time feel like it's accelerating. The perceived
                        time metric above shows how much of your <em>felt experience</em> remains, not just calendar time.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Progress Bars */}
                <div className="grid md:grid-cols-2 gap-6">
                  <div className="bg-gray-800/30 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50">
                    <div className="space-y-4">
                      <h3 className="text-lg font-light text-gray-300">Calendar Time</h3>
                      <div className="flex justify-between text-sm text-gray-400 font-light">
                        <span>Birth</span>
                        <span className="text-green-400">Now</span>
                        <span>Age {goalAge}</span>
                      </div>
                      <div className="h-3 bg-gray-900/50 rounded-full overflow-hidden">
                        <div
                          className="h-full bg-gradient-to-r from-gray-600 to-green-400 transition-all duration-1000"
                          style={{ width: `${metrics.percentageLived}%` }}
                        />
                      </div>
                    </div>
                  </div>

                  <div className="bg-purple-900/20 backdrop-blur-sm rounded-2xl p-8 border border-purple-700/30">
                    <div className="space-y-4">
                      <h3 className="text-lg font-light text-purple-200">Perceived Time</h3>
                      <div className="flex justify-between text-sm text-purple-300 font-light">
                        <span>Birth</span>
                        <span className="text-purple-400">Now</span>
                        <span>Age {goalAge}</span>
                      </div>
                      <div className="h-3 bg-purple-950/50 rounded-full overflow-hidden">
                        <div
                          className="h-full bg-gradient-to-r from-purple-600 to-purple-400 transition-all duration-1000"
                          style={{ width: `${100 - parseFloat(metrics.perceivedPercentageRemaining)}%` }}
                        />
                      </div>
                    </div>
                  </div>
                </div>

                {/* Life Grid */}
                <div className="bg-gray-800/30 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50">
                  <h2 className="text-2xl font-extralight text-gray-100 mb-6 text-center">
                    Your Life in Months (Scaled by Perceived Time)
                  </h2>
                  <div className="flex flex-wrap gap-1 justify-center max-w-5xl mx-auto items-end">
                    {renderLifeGrid()}
                  </div>
                  <div className="flex justify-center gap-6 mt-8 text-sm text-gray-400 font-light flex-wrap">
                    <div className="flex items-center gap-2">
                      <div className="w-3 h-3 bg-gray-700/30" />
                      <span>Past</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="w-3 h-3 bg-green-400 shadow-lg shadow-green-400/50" />
                      <span>Current</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="w-3 h-3 bg-blue-400" />
                      <span>Youth (0-20)</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="w-3 h-3 bg-green-400" />
                      <span>Peak (20-40)</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="w-3 h-3 bg-yellow-400" />
                      <span>Prime (40-60)</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="w-3 h-3 bg-orange-400" />
                      <span>Mature (60-75)</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="w-3 h-3 bg-red-400" />
                      <span>Elder (75+)</span>
                    </div>
                  </div>
                </div>

                {/* Quote Section */}
                <div className="bg-gradient-to-br from-gray-800/40 to-gray-800/20 backdrop-blur-sm rounded-2xl p-12 border border-gray-700/50">
                  <blockquote className="space-y-6 text-center max-w-3xl mx-auto">
                    <p className="text-2xl font-light text-gray-200 leading-relaxed transition-all duration-500">
                      "{currentQuote.text}"
                    </p>
                    <footer className="text-gray-400 text-lg font-light">
                      — {currentQuote.author}
                    </footer>
                  </blockquote>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<PerspectiveEngine />);
    </script>
</body>
</html>
